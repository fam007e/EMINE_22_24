var AUTOSAVE_TIME=ASSIGNMENT_AUTOSAVE_INTERVAL||6E4,autoSaveRequired=!1;setIconFolder(getClientURL("assignments/all/run/images/buttons"));$(function(){initControlbar()});function onPress(a){window.status="Loading...";doAction(a);window.status="Done"}function viewDetails(){var a=document.forms.edu_form;null!=document.getElementById("test")?(a.action="modules/viewRecord.TestDetails",a.submit()):onPress("showAllQuestions")}function backToGrade(){parent.history.back()}
function gotoPage(a,b){null!=b&&0<b.length&&(document.edu_form.action=b);document.edu_form.elements["goto"].value=a;doAction("goto")}function gotoJump(){if(document.getElementById("jump_ctrl")){var a=document.getElementById("jump_ctrl").selectedIndex;0<=a&&gotoPage(a)}}function doQuit(){parent.close()}var numOfCkeditors=0;function enabler(){$("#menu li, #assignmentButtons li, #assignmentButtonsTop li").attr("onclick","").off("click")}
function formaTime(a){var b=a.getHours()+":",b=b+((10<a.getMinutes()?a.getMinutes():"0"+a.getMinutes())+":");return b+=10<a.getSeconds()?a.getSeconds():"0"+a.getSeconds()}
function autoSave(){if(pageFullyLoaded()&&1!=clickCounter){console.log("autosaving");var a=$("input[name\x3dactionID]").val();$("input[name\x3dactionID]").val("autosave");readAppletItems(!0);var b=document.forms.edu_form,c=$(b).serialize(),b=$(b).attr("action");$.ajax({type:"POST",url:b,data:c,async:!0,success:function(a){autoSaveRequired=!1;a=new Date($.now());a=formaTime(a);$(".autoSaveMsg").html(msgLastAutosave+a)},error:function(a){(new AjaxErrorDialogView({model:{request:a}})).render()}});$("input[name\x3dactionID]").val(a)}}
function prepareToSave(){autoSaveRequired&&autoSave()}function editorChangedForAutosave(){if(!autoSaveRequired){var a=$(".autoSaveMsg").html();$(".autoSaveMsg").html("* "+a)}autoSaveRequired=!0}function initAutoSave(){0<$("div.assignmentHolder").find(".essayQuestion").length&&(setInterval(prepareToSave,AUTOSAVE_TIME),console.log("Autosave init: "+AUTOSAVE_TIME),CKEDITOR.on("instanceReady",function(){$(".autoSaveMsg").html("");autoSaveRequired=!1}))}
$(function(){initAutoSave();0==numOfCkeditors&&enabler();$(".groupTitle").on("click",function(){$("a:first",$(this).siblings("nav")).trigger("click");return!1});var a=function(){if(!window.noUnloadAction){readAppletItems();var a=document.forms.edu_form;if(a&&(a.elements.actionID.value="quit_save",$.ajax({async:"Chrome"==BrowserDetect.browser?!0:!1,type:"POST",url:a.action,data:$(a).serialize()}),isIframe()))return doAction("quit_save",null)}};$(".assignmentTopMenu a[href]").on("click",a);window.addEventListener("beforeunload",
a);$(".assignmentTopMenu .help-link").off("click");if(0<$("#collapseMenu").length){var b=!1;$("#bs-example-navbar-collapse-1").on("show.bs.collapse",function(){var a=$("#instructionModuleMenu").html();$("#instructionModuleMenu").attr("id","instructionModuleMenu_collapse");$("#bs-example-navbar-collapse-1").append($(a));$("#bs-example-navbar-collapse-1 #collapseMenu").attr("class",$("#menu ul:first-child").attr("class"));$("#bs-example-navbar-collapse-1 #collapseMenu").attr("id","instructionModuleMenu");
b=!0});$("#bs-example-navbar-collapse-1").on("hidden.bs.collapse",function(){$("#bs-example-navbar-collapse-1 div:last-child").remove();$("#instructionModuleMenu_collapse").attr("id","instructionModuleMenu");b=!1});$(window).on("resize",function(){$("#bs-example-navbar-collapse-1").is(":visible")&&b&&$("#bs-example-navbar-collapse-1").collapse("hide")})}});